(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,11856,e=>{"use strict";let t=e.i(47167).default.env.NEXT_PUBLIC_API_URL;async function a(){let e=await fetch(`${t}/product`,{method:"GET",cache:"no-store"});if(!e.ok)throw Error("Failed to fetch products");return(await e.json()).data}async function r(e){let a=await fetch(`${t}/product`,{method:"POST",body:e});if(!a.ok)throw Error("Failed to create product");return await a.json()}async function o(e,a){let r=await fetch(`${t}/product/${e}`,{method:"PUT",body:a});if(!r.ok)throw Error("Failed to update product");return await r.json()}async function l(e){let a=await fetch(`${t}/product/${e}`,{method:"DELETE"});if(!a.ok)throw Error("Failed to delete product");return await a.json()}e.s(["createProduct",()=>r,"deleteProduct",()=>l,"getProducts",()=>a,"updateProduct",()=>o])},60956,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(53967),o=e.i(11856),l=e.i(95623),i=e.i(47167);function s({selected:e,onChange:r}){let[o,l]=(0,a.useState)(null),[s,d]=(0,a.useState)(!1),n=i.default.env.NEXT_PUBLIC_IMAGE_URL,c=o||(e.image?`${n}/products/${e.image}`:null);return(0,t.jsx)("div",{children:(0,t.jsxs)("form",{children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Title"}),(0,t.jsx)("input",{type:"text",className:"w-full border border-gray-300 rounded px-3 py-2",value:e.title,onChange:e=>r("title",e.target.value)})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Price"}),(0,t.jsx)("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2",value:e.price,onChange:e=>r("price",e.target.value),onFocus:e=>e.target.addEventListener("wheel",e=>e.preventDefault(),{passive:!1}),onBlur:e=>e.target.removeEventListener("wheel",e=>e.preventDefault())})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Stock"}),(0,t.jsx)("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2",value:e.stock,onChange:e=>r("stock",e.target.value),onFocus:e=>e.target.addEventListener("wheel",e=>e.preventDefault(),{passive:!1}),onBlur:e=>e.target.removeEventListener("wheel",e=>e.preventDefault())})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Upload Image"}),(0,t.jsxs)("label",{className:"border-gray-300 bg-gray-100 text-gray-700 py-2 px-3 rounded cursor-pointer inline-block",children:["Choose File",(0,t.jsx)("input",{type:"file",className:"hidden",onChange:function(e){let t=e.target.files?.[0];if(!t)return;r("image",t),d(!1);let a=new FileReader;a.onloadend=()=>{l(a.result)},a.readAsDataURL(t)}})]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Image Preview"}),(0,t.jsx)("div",{className:"w-full h-48 border border-gray-300 rounded bg-gray-100 flex items-center justify-center",children:c&&!s?(0,t.jsx)("img",{src:c,alt:"Preview",className:"max-h-full max-w-full object-contain",onError:()=>d(!0)}):(0,t.jsx)("span",{className:"text-gray-400",children:"Image not found"})})]})]})})}var d=e.i(38325);function n(){let[e,i]=(0,a.useState)([]),[n,c]=(0,a.useState)(!1),[u,m]=(0,a.useState)(null);async function p(){if(u)try{let e,t,a,r=new FormData;if(r.append("title",u.title),r.append("price",u.price),r.append("stock",u.stock),u.image instanceof File&&r.append("image",u.image),""===u.id?(e=await (0,o.createProduct)(r),t="Product created successfully",a="Failed to create product"):(e=await (0,o.updateProduct)(u.id,r),t="Product updated successfully",a="Failed to update product"),!e.status)return void d.default.fire("Error",a,"error");d.default.fire("Success",t,"success").then(()=>{(0,o.getProducts)().then(e=>i(e))}),c(!1)}catch(e){console.log("Error:",e)}}(0,a.useEffect)(()=>{(async()=>{i(await (0,o.getProducts)())})()},[]);let h=[{field:"id",headerName:"ID",width:80},{field:"title",headerName:"Title",flex:1},{field:"stock",headerName:"Stock",width:120},{field:"price",headerName:"Price",width:150},{field:"action",headerName:"Action",width:150,sortable:!1,filterable:!1,align:"right",headerAlign:"right",renderCell:e=>(0,t.jsxs)("div",{className:"flex gap-2 justify-end",style:{pointerEvents:"auto"},onMouseDown:e=>e.stopPropagation(),onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("button",{tabIndex:-1,className:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600",onClick:t=>{t.stopPropagation(),m(e.row),c(!0)},children:"Edit"}),(0,t.jsx)("button",{tabIndex:-1,className:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600",onClick:t=>{var a;t.stopPropagation(),a=e.row,d.default.fire({title:"Are you sure?",text:`Do you want to delete product "${a.title}"?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(async e=>{if(e.isConfirmed)try{if(!(await (0,o.deleteProduct)(a.id)).status)return void d.default.fire("Error","Failed to delete product","error");d.default.fire("Deleted!","Product has been deleted.","success").then(()=>{(0,o.getProducts)().then(e=>i(e))})}catch(e){console.log("Error:",e)}})},children:"Delete"})]})}];return(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-12 gap-4 items-center",children:[(0,t.jsx)("div",{className:"col-span-10",children:(0,t.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Products Management"})}),(0,t.jsx)("div",{className:"col-span-2",children:(0,t.jsx)("button",{className:"w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",onClick:()=>{m({id:"",title:"",stock:"",price:"",image:""}),c(!0)},children:"Add Product"})})]}),(0,t.jsx)(r.DataGrid,{rows:e,columns:h,getRowId:e=>e.id,disableRowSelectionOnClick:!0,disableColumnMenu:!0,hideFooterSelectedRowCount:!0,initialState:{pagination:{paginationModel:{pageSize:10}}},autoHeight:!0,pageSizeOptions:[10,20,50]}),(0,t.jsx)(l.default,{width:"600px",title:u?.id===""?"Add Product":"Edit Product",open:n,onClose:()=>c(!1),footer:(0,t.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,t.jsx)("button",{className:"px-4 py-2 bg-gray-300 rounded",onClick:()=>c(!1),children:"Cancel"}),(0,t.jsx)("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",onClick:p,children:"Save"})]}),children:u&&(0,t.jsx)(s,{selected:u,onChange:(e,t)=>m(a=>a?{...a,[e]:t}:a)})})]})}e.s(["default",()=>n],60956)}]);