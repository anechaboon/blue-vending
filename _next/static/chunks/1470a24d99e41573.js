(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,57593,e=>{"use strict";let t=e.i(47167).default.env.NEXT_PUBLIC_API_URL;async function a(e=""){let s=await fetch(`${t}/cash`+e,{method:"GET",cache:"no-store"});if(!s.ok)throw Error("Failed to fetch cashes");return(await s.json()).data}async function s(e){let a=await fetch(`${t}/cash`,{method:"POST",body:e});if(!a.ok)throw Error("Failed to create cash");return await a.json()}async function l(e,a){let s=await fetch(`${t}/cash/${e}`,{method:"PUT",body:a});if(!s.ok)throw Error("Failed to update cash");return await s.json()}async function i(e){let a=await fetch(`${t}/cash/${e}`,{method:"DELETE"});if(!a.ok)throw Error("Failed to delete cash");return await a.json()}e.s(["createCash",()=>s,"deleteCash",()=>i,"getCashes",()=>a,"updateCash",()=>l])},56637,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(53967),l=e.i(57593),i=e.i(95623);function r({selected:e,onChange:a}){return(0,t.jsx)("div",{children:(0,t.jsxs)("form",{children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Cash Type"}),(0,t.jsxs)("select",{className:"w-full border border-gray-300 rounded px-3 py-2",value:e.cash_type,onChange:e=>a("cash_type",e.target.value),children:[(0,t.jsx)("option",{value:"BILL",children:"BILL"}),(0,t.jsx)("option",{value:"COIN",children:"COIN"})]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Cash"}),(0,t.jsx)("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2",value:e.cash,onChange:e=>a("cash",e.target.value),onFocus:e=>e.target.addEventListener("wheel",e=>e.preventDefault(),{passive:!1}),onBlur:e=>e.target.removeEventListener("wheel",e=>e.preventDefault())})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Stock"}),(0,t.jsx)("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2",value:e.stock,onChange:e=>a("stock",e.target.value),onFocus:e=>e.target.addEventListener("wheel",e=>e.preventDefault(),{passive:!1}),onBlur:e=>e.target.removeEventListener("wheel",e=>e.preventDefault())})]}),(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsxs)("label",{className:"inline-flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",className:"form-checkbox",checked:e.is_active??!1,onChange:e=>a("is_active",e.target.checked)}),(0,t.jsx)("span",{className:"ml-2",children:"Is Active"})]})})]})})}var n=e.i(38325);function o(){let[e,o]=(0,a.useState)([]),[c,d]=(0,a.useState)(!1),[h,u]=(0,a.useState)(null);async function p(){if(h)try{let e,t,a,s=new FormData;if(s.append("cash_type",h.cash_type),s.append("cash",h.cash.toString()),s.append("stock",h.stock.toString()),s.append("is_active",(+!!h.is_active).toString()),""===h.id?(e=await (0,l.createCash)(s),t="Cash created successfully",a="Failed to create cash"):(e=await (0,l.updateCash)(Number(h.id),s),t="Cash updated successfully",a="Failed to update cash"),!e.status)return void n.default.fire("Error",a,"error");n.default.fire("Success",t,"success").then(()=>{(0,l.getCashes)("?is_active=all").then(e=>o(e))}),d(!1)}catch(e){console.log("Error:",e)}}(0,a.useEffect)(()=>{(async()=>{o(await (0,l.getCashes)("?is_active=all"))})()},[]);let f=[{field:"id",headerName:"ID",width:80},{field:"cash_type",headerName:"Cash Type",flex:1},{field:"cash",headerName:"Cash",flex:1},{field:"stock",headerName:"Stock",flex:1},{field:"action",headerName:"Action",width:180,sortable:!1,filterable:!1,align:"right",headerAlign:"right",renderCell:e=>(0,t.jsxs)("div",{className:"flex gap-2 justify-end",style:{pointerEvents:"auto"},onMouseDown:e=>e.stopPropagation(),onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("button",{tabIndex:-1,className:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600",onClick:t=>{t.stopPropagation(),u(e.row),d(!0)},children:"Edit"}),(0,t.jsx)("button",{tabIndex:-1,className:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600",onClick:t=>{var a;t.stopPropagation(),a=e.row,n.default.fire({title:"Are you sure?",text:`Do you want to delete cash "${a.cash_type} - ${a.cash}"?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(async e=>{if(e.isConfirmed)try{if(!(await (0,l.deleteCash)(Number(a.id))).status)return void n.default.fire("Error","Failed to delete cash","error");n.default.fire("Deleted!","Cash has been deleted.","success").then(()=>{(0,l.getCashes)("?is_active=all").then(e=>o(e))})}catch(e){console.log("Error:",e)}})},children:"Delete"})]})}];return(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-12 gap-4 items-center",children:[(0,t.jsx)("div",{className:"col-span-10",children:(0,t.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Cash Management"})}),(0,t.jsx)("div",{className:"col-span-2",children:(0,t.jsx)("button",{className:"w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",onClick:()=>{u({id:"",cash_type:"",cash:0,stock:0}),d(!0)},children:"Add Cash"})})]}),(0,t.jsx)(s.DataGrid,{rows:e,columns:f,getRowId:e=>e.id,disableRowSelectionOnClick:!0,disableColumnMenu:!0,hideFooterSelectedRowCount:!0,initialState:{pagination:{paginationModel:{pageSize:10}}},autoHeight:!0,pageSizeOptions:[10,20,50]}),(0,t.jsx)(i.default,{width:"600px",title:h?.id===""?"Add Cash":"Edit Cash",open:c,onClose:()=>d(!1),footer:(0,t.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,t.jsx)("button",{className:"px-4 py-2 bg-gray-300 rounded",onClick:()=>d(!1),children:"Cancel"}),(0,t.jsx)("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",onClick:p,children:"Save"})]}),children:h&&(0,t.jsx)(r,{selected:h,onChange:(e,t)=>u(a=>a?{...a,[e]:t}:a)})})]})}e.s(["default",()=>o],56637)}]);